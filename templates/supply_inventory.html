<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“¦ ç”¨å“å­˜è²¨ç´€éŒ„</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .item-card { min-height: 100px; }
    .hidden { display: none; }
  </style>
</head>
<body style="background-color: #f8f9fa;">

<div class="container py-5">
  <div class="row g-4">

    <!-- ğŸ“¦ å·¦å´ï¼šç”¨å“æ¸…å–® -->
    <div class="col-md-6">
      <div class="card shadow p-3 rounded-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h5 class="mb-0">ğŸ“¦ ç”¨å“å­˜è²¨ç´€éŒ„</h5>
          <button class="btn btn-sm btn-success" onclick="addItem()">â• æ–°å¢</button>
        </div>
        <div id="item-list">
          <!-- ç”¨å“é …ç›®æœƒåŠ åœ¨é€™è£¡ -->
        </div>
      </div>
    </div>

    <!-- ğŸ“‹ å³å´ï¼šè©³ç´°ç´€éŒ„ -->
    <div class="col-md-6">
      <div class="card shadow p-3 rounded-4 hidden" id="record-panel">
        <h5 class="mb-3"><span id="record-item-name">é …ç›®åç¨±</span> çš„å­˜è²¨ç´€éŒ„</h5>

        <!-- ç´€éŒ„è¡¨æ ¼ -->
        <table class="table table-bordered text-center">
          <thead class="table-light">
            <tr>
              <th>æ—¥æœŸæ™‚é–“</th>
              <th>æ•¸é‡</th>
              <th>å‚™è¨»</th>
              <th>æ“ä½œ</th>
            </tr>
          </thead>
          <tbody id="record-table-body">
            <!-- ç´€éŒ„åˆ— -->
          </tbody>
        </table>

        <!-- æ–°å¢ç´€éŒ„è¡¨å–® -->
        <div class="mt-3">
          <h6>æ–°å¢å­˜è²¨ç´€éŒ„</h6>
          <div class="row g-2">
            <div class="col-6">
              <input type="datetime-local" class="form-control" id="new-date">
            </div>
            <div class="col-3">
              <input type="number" class="form-control" id="new-quantity" placeholder="æ•¸é‡">
            </div>
            <div class="col-3">
              <input type="text" class="form-control" id="new-note" placeholder="å‚™è¨»">
            </div>
            <div class="col-12 text-end">
              <button class="btn btn-sm btn-primary" onclick="addRecord()">æ–°å¢ç´€éŒ„</button>
            </div>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>

<script>
  let itemId = 1;
  let currentItem = null;

  function addItem() {
    const container = document.getElementById("item-list");
    const div = document.createElement("div");
    div.className = "card mb-2 p-3 item-card";
    div.innerHTML = `
      <div class="row align-items-center">
        <div class="col-5"><input type="text" class="form-control" placeholder="é …ç›®åç¨±"></div>
        <div class="col-3"><input type="number" class="form-control" placeholder="åº«å­˜/è­¦æˆ’å€¼"></div>
        <div class="col-4 text-end">
          <button class="btn btn-sm btn-outline-primary me-1" onclick="showRecord(this)">ğŸ““ç´€éŒ„</button>
          <button class="btn btn-sm btn-outline-danger" onclick="deleteItem(this)">âŒåˆªé™¤</button>
        </div>
      </div>
    `;
    div.dataset.itemId = itemId++;
    container.appendChild(div);
  }

  function deleteItem(button) {
    button.closest(".item-card").remove();
    document.getElementById("record-panel").classList.add("hidden");
  }

  function showRecord(button) {
    const itemCard = button.closest(".item-card");
    const itemName = itemCard.querySelector("input[type='text']").value || "æœªå‘½åé …ç›®";
    currentItem = itemCard.dataset.itemId;
    document.getElementById("record-item-name").textContent = itemName;
    document.getElementById("record-panel").classList.remove("hidden");
    document.getElementById("record-table-body").innerHTML = ""; // æ¸…ç©ºç´€éŒ„
  }

  function addRecord() {
    const tbody = document.getElementById("record-table-body");
    const date = document.getElementById("new-date").value;
    const qty = document.getElementById("new-quantity").value;
    const note = document.getElementById("new-note").value;

    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${date}</td>
      <td>${qty}</td>
      <td>${note}</td>
      <td>
        <button class="btn btn-sm btn-outline-secondary me-1">ç·¨è¼¯</button>
        <button class="btn btn-sm btn-outline-danger" onclick="this.closest('tr').remove()">åˆªé™¤</button>
      </td>
    `;
    tbody.appendChild(row);

    // æ¸…ç©ºè¼¸å…¥æ¬„
    document.getElementById("new-date").value = "";
    document.getElementById("new-quantity").value = "";
    document.getElementById("new-note").value = "";
  }
</script>
</body>
</html>
